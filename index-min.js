let params;function fadeout(e){var r=document.getElementById(e),t=setInterval((()=>{r.style.opacity||(r.style.opacity=1),r.style.opacity>0?r.style.opacity-=.1:clearInterval(t)}),200)}var errorInterval;function error(e){var r=document.getElementById("errorPrompt");r.innerText=e,r.style.opacity=1,clearTimeout(errorInterval),errorInterval=setTimeout((()=>{fadeout("errorPrompt")}),3e3)}function showPanel(e){document.getElementById(e).style.display="block"}async function main(){if(window.location.hash){const e=window.location.hash.slice(1);try{params=JSON.parse(atob(e))}catch(e){return error("Invalid link"),void showPanel("panel-error")}message=params.m,message&&(document.getElementById("title").innerHTML=message),showPanel("panel-input")}else showPanel("panel-error")}async function decrypt(){const e=document.getElementById("password").value;if(!e)return void error("Please type a password");const r=await doDecrypt(params.e1,e),t=await doDecrypt(params.e2,e),a=await doDecrypt(params.e3,"afkla4^$QWkf;arg");proceedLink(r||(t||a))}function proceedLink(e){error("Unlocked, opening link");try{new URL(e);window.location.replace(e)}catch{return void error("Invalid link")}}async function doDecrypt(e,r){let t=null;try{t=await cryptoApi.decrypt(e,r)}catch(e){}return t}